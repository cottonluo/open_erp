"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.FunctionDeclarationVisitor = undefined;

var _functionRefinementRule = require("./refinement-rules/function-refinement-rule");

var _typeInferenceContext = require("./type-inference-context");

/**
 * Visitor that infers the base type for all functions.
 * Functions are hoisted therefore need to be defined before it's node is visited
 */
class FunctionDeclarationVisitor {

	constructor(program, typeEnvironment) {
		this.program = program;
		this.typeEnvironment = typeEnvironment;
	}

	enterFunctionDeclaration(path) {
		const context = new _typeInferenceContext.TypeInferenceContext(this.program, this.typeEnvironment);
		_functionRefinementRule.FunctionRefinementRule.inferFunctionType(path.node, context);

		this.typeEnvironment = context.typeEnvironment;
	}

	defaultHandler() {
		// OK
	}
}
exports.FunctionDeclarationVisitor = FunctionDeclarationVisitor;
//# sourceMappingURL=function-declaration-visitor.js.map
