"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.infer = infer;

var _util = require("./util");

var _cfgBuilder = require("./cfg/cfg-builder");

var _cfgBuilder2 = _interopRequireDefault(_cfgBuilder);

var _symbolExtractor = require("./semantic-model/symbol-extractor");

var _symbolExtractor2 = _interopRequireDefault(_symbolExtractor);

var _forwardTypeInferenceAnalysis = require("./type-inference/forward-type-inference-analysis");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function infer(sourceFile, program) {
	sourceFile.parse();

	const visitors = [(0, _util.createTraverseVisitorWrapper)(new _cfgBuilder2.default(sourceFile.ast)), (0, _util.createTraverseVisitorWrapper)(new _symbolExtractor2.default(program))];
	sourceFile.analyse(visitors);

	const forwardTypeInferenceAnalysis = new _forwardTypeInferenceAnalysis.ForwardTypeInferenceAnalysis(program);
	return forwardTypeInferenceAnalysis.analyseSourceFile(sourceFile);
}
//# sourceMappingURL=infer.js.map
