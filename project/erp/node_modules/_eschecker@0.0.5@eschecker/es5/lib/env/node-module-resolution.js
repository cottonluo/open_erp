"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.NodeModuleResolution = undefined;

var _fs = require("fs");

var _fs2 = _interopRequireDefault(_fs);

var _resolve = require("resolve");

var _resolve2 = _interopRequireDefault(_resolve);

var _process = require("process");

var _process2 = _interopRequireDefault(_process);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Resolver that implements the node module resolution logic.
 */
class NodeModuleResolution {

	/**
  * Reads the file from the given path using the node resolve algorithm to resolve the file
  * @param fileName {string} the path to the file
  * @return {Promise<string>} the content of the file
  */
	readFile(fileName) {
		const canoncialName = this.canoncialName(fileName, {});
		return _fs2.default.readFileSync(canoncialName, "utf8");
	}

	/**
  * Resolves a relative node path to the absolute filesystem path
  * @param fileName {string} the relative path
  * @returns {Promise} a promise that resolves to the absolute path
  */
	canoncialName(fileName) {
		return _resolve2.default.sync(fileName, { basedir: _process2.default.cwd() });
	}
}

exports.NodeModuleResolution = NodeModuleResolution;
exports.default = NodeModuleResolution;
//# sourceMappingURL=node-module-resolution.js.map
