"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.ThisExpressionRefinementRule = undefined;

var _typeInferenceError = require("../type-inference-error");

/**
 * Refinement rule for this
 * @implements {RefinementRule}
 */
class ThisExpressionRefinementRule {
	canRefine(node) {
		return node.type === "ThisExpression";
	}

	refine(node, context) {
		const symbol = context.getSymbol(node);
		const type = context.getType(symbol);

		if (!type) {
			throw new _typeInferenceError.TypeInferenceError("Access to this outside of a function", node);
		}

		return type;
	}
}

exports.ThisExpressionRefinementRule = ThisExpressionRefinementRule;
exports.default = ThisExpressionRefinementRule;
//# sourceMappingURL=this-expression-refinement-rule.js.map
